import"./assets/styles-JE8YjOlG.js";import{i as S}from"./assets/vendor-Ddu0QL_4.js";import{S as u,o as y,s,a,g as h,b as C}from"./assets/handlers-CeB5icqR.js";function L(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.log(`Error getting data from LS: ${e.message}`),null}}function I(){return L(u.WISHLIST)||[]}function E(t){localStorage.setItem(u.cart,JSON.stringify(t))}function i(){return JSON.parse(localStorage.getItem(u.cart))||[]}function l(){const t=document.querySelector("[data-cart-count]"),e=document.querySelector("[data-wishlist-count]"),r=i(),n=I();t&&(t.textContent=r.length),e&&(e.textContent=n.length)}const o={productsList:document.querySelector(".products"),itemsCount:document.querySelector("[data-count]"),totalPrice:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),notFound:document.querySelector(".not-found")};async function d(){s(!0);const t=i()||[];if(t.length===0){o.productsList.innerHTML="",a(!0),m(0,0),s(!1),l();return}try{const e=await Promise.all(t.map(c=>h(c)));C(e),a(!1);const r=e.length,n=e.reduce((c,p)=>c+p.price,0).toFixed(2);m(r,n)}catch(e){console.error("Cart load error:",e),S.error({title:"Error",message:"Failed to load products",position:"topRight"}),a(!0)}finally{s(!1)}}function m(t,e){o.itemsCount.textContent=t,o.totalPrice.textContent=`$${e}`}function P(){const t=i()||[];E(t),l(),d()}var g;(g=o.productsList)==null||g.addEventListener("click",t=>{y(t),setTimeout(P,100)});var f;(f=o.buyBtn)==null||f.addEventListener("click",()=>{S.success({title:"Success!",message:"Purchase successful!",position:"topRight"}),localStorage.removeItem("cart"),l(),d()});d();
//# sourceMappingURL=cart.js.map
